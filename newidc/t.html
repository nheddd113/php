<!DOCTYPE=html>
<html>

<head>
    <script src="http://idc.uqee.com/Public/assets/js/jquery-2.0.3.min.js" type="text/javascript"></script>
    <meta charset="utf-8">
    <script type="text/javascript">
    // $(document).ready(function() {
    //     var range = 50; //距下边界长度/单位px
    //     var elemt = 200; //插入元素高度/单位px
    //     var maxnum = 20; //设置加载最多次数
    //     var num = 1;
    //     var totalheight = 0;
    //     var main = $("#content"); //主体元素
    //     $(window).scroll(function() {
    //         var srollPos = $(window).scrollTop(); //滚动条距顶部距离(页面超出窗口的高度)
    //         console.log("滚动条到顶部的垂直高度: " + $(document).scrollTop());
    //         console.log("页面的文档高度 ：" + $(document).height());
    //         console.log('浏览器的高度：' + $(window).height());
    //         totalheight = parseFloat($(window).height()) + parseFloat(srollPos);
    //         console.log('差值', $(document).height());
    //         if (($(document).height() - range) <= totalheight && num != maxnum) {
    //             main.append("<div style='border:1px solid tomato;margin-top:20px;color:#ac" + (num % 20) + (num % 20) + ";height:" + elemt + "' >hello world" + srollPos + "---" + num + "</div>");
    //             num++;
    //         }
    //     });
    // });
    </script>
</head>

<body>
    <div id="wrapper">
        <ul>
            <li>row 10</li>
            <li>row 9</li>
            <li>row 8</li>
            <li>row 7</li>
            <li>row 6</li>
            <li>row 5</li>
            <li>row 4</li>
            <li>row 3</li>
            <li>row 2</li>
            <li>row 1</li>
        </ul>
    </div>
    <script>
    // for (var i = 0; i < document.querySelectorAll("#wrapper ul li").length; i++) {
    //     document.querySelectorAll("#wrapper ul li")[i].colorfulBg();
    // }
    refresher.init({
        id: "wrapper",
        pullDownAction: Refresh,
        pullUpAction: Load
    });
    var generatedCount = 0;

    function Refresh() {
        setTimeout(function() { // <-- Simulate network congestion, remove setTimeout from production!
            var el, li, i;
            el = document.querySelector("#wrapper ul");
            el.innerHTML = '';
            for (i = 0; i < 11; i++) {
                li = document.createElement('li');
                li.appendChild(document.createTextNode('async row ' + (++generatedCount)));
                el.insertBefore(li, el.childNodes[0]);
            }
            wrapper.refresh(); /****remember to refresh after  action completed！ ---yourId.refresh(); ----| ****/
            for (var i = 0; i < document.querySelectorAll("#wrapper ul li").length; i++) {
                document.querySelectorAll("#wrapper ul li")[i].colorfulBg();
            }
        }, 1000);

    }

    function Load() {
        setTimeout(function() { // <-- Simulate network congestion, remove setTimeout from production!
            var el, li, i;
            el = document.querySelector("#wrapper ul");
            for (i = 0; i < 2; i++) {
                li = document.createElement('li');
                li.appendChild(document.createTextNode('async row ' + (++generatedCount)));
                el.appendChild(li, el.childNodes[0]);
            }
            wrapper.refresh(); /****remember to refresh after action completed！！！   ---id.refresh(); --- ****/
            for (var i = 0; i < document.querySelectorAll("#wrapper ul li").length; i++) {
                document.querySelectorAll("#wrapper ul li")[i].colorfulBg();
            }
        }, 1000);
    }
    </script>
</body>

</html>
